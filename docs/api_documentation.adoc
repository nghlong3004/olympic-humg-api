= API Documentation
:doctype: book
:toc:
:toclevels: 2

== General Format

=== Base URL

[source]
----
/api
----

Ví dụ đầy đủ cho môi trường dev:

[source]
----
http://localhost:8080/api
----

=== Character Encoding

* Tất cả request/response dùng `UTF-8`.

=== Common Data Types

[cols="2,3,5",options="header"]
|===
| Kiểu
| Ví dụ
| Ghi chú

| `string`
| `"Long Nguyen"`
| Chuỗi ký tự UTF-8

| `email`
| `"student01@example.com"`
| Chuỗi, format email

| `date`
| `"2004-03-30"`
| ISO-8601, `YYYY-MM-DD`

| `datetime`
| `"2025-02-10T12:30:00"`
| ISO-8601, `YYYY-MM-DDThh:mm:ss`

| `enum`
| `"STUDENT"`
| Một trong những giá trị cho phép
|===

=== ErrorResponse Data Type

[cols="2,2,6",options="header"]
|===
| Trường | Kiểu | Ghi chú

| `timestamp`
| datetime
| Thời điểm xảy ra lỗi

| `status`
| number
| Mã lỗi HTTP

| `message`
| string
| Thông báo lỗi chung để hiển thị cho người dùng

| `details`
| map<string, string>
| Dùng khi lỗi Validation (400). Key là tên field, Value là nội dung lỗi.
|===

=== Authorization & Roles

* Cơ chế auth: `session-cookie` với cookie `JSESSIONID`.
* Các role chính:
** `STUDENT`
** `TEACHER`
** `ADMIN`
* Tất cả endpoint (trừ Auth) yêu cầu cookie `JSESSIONID` hợp lệ.


include::auth_api.adoc[Auth API]

include::user_api.adoc[User API]

include::document_api.adoc[Document API]

include::forum_api.adoc[Forum API]

include::assignment_api.adoc[Assigment API]

include::question_api.adoc[Question API]

